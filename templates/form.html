<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramesh Engineering - Invoice Form</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f6fa;
            --text-color: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f2f5;
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .item {
            background: var(--secondary-color);
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #357abd;
        }

        button[type="button"] {
            background-color: #6c757d;
            margin-bottom: 20px;
        }

        button[type="submit"] {
            display: block;
            width: 100%;
            margin-top: 20px;
        }

        h3 {
            color: var(--primary-color);
            margin-top: 30px;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            form {
                padding: 15px;
            }
        }
    </style>
</head>

<body>
    <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 class="main-title">Ramesh Engineering</h1>
        <button onclick="logout()" style="background-color: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
            Logout
        </button>
    </header>
    <h2 class="subtitle">Invoice Form</h2>
    <form action="/generate" method="post">
        <div class="form-group">
            <label>Invoice No:</label>
            <input type="text" name="invoice_no" required>
        </div>
        <div class="form-group">
            <label>E-way Bill No:</label>
            <input type="text" name="eway_bill_no" required>
        </div>
        <div class="form-group">
            <label>Your DC No:</label>
            <input type="text" name="your_dc_no" required>
        </div>
        <div class="form-group">
            <label>Invoice Date:</label>
            <input type="date" name="invoice_date" required>
        </div>
        <div class="form-group">
            <label>Bill To:</label>
            <textarea name="bill_to" required></textarea>
        </div>
        <div class="form-group">
            <label>Tax Rate (%):</label>
            <select name="tax_rate" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px; box-sizing: border-box;">
            <option value="12">12%</option>
            <option value="18">18%</option>
            </select>
        </div>
        <div class="form-group">
            <label>Tax Invoice Type:</label>
            <select name="tax_invoice_type" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px; box-sizing: border-box;">
            <option value="Original">Original</option>
            <option value="Duplicate">Duplicate</option>
            </select>
        </div>

        <h3>Items</h3>
        <div id="items">
            <div class="item" id="item_0">
            <label>Description:</label>
            <textarea name="item_description_0" required></textarea>
            <label>Quantity:</label>
            <input type="number" name="item_quantity_0" required>
            <label>Rate:</label>
            <input type="number" name="item_rate_0" required>
            <button type="button" onclick="deleteItem(0)">Delete</button>
            </div>
        </div>
        <input type="hidden" name="item_count" value="1" id="item_count">
        <button type="button" onclick="addItem()">Add Item</button>
        <div class="form-group">
            <h3>Bank details:</h3>
            <p>. A/C Name:RAMESH ENGINEERING</p>
            <p>. Bank Name: CANARA BANK</p>
            <p>. IFSC Code:CNRB0010651</p>
            <p>. Account number:04081010002140</p>
        </div>

        <div class="form-group">
            <h3>Terms and Conditions</h3>
            <p>1. Payment is due within 30 days from the date of invoice</p>
            <p>2. Please make payment via bank transfer to the account details provided</p>
            <p>3. Goods once sold cannot be returned</p>
            <p>4. All disputes are subject to local jurisdiction only</p>
            <input type="hidden" name="terms" value="1. Payment is due within 30 days from the date of invoice
        2. Please make payment via bank transfer to the account details provided
        3. Goods once sold cannot be returned
        4. All disputes are subject to local jurisdiction only">
        </div>
        <button type="submit">Generate Invoice</button>
    </form>

    <script>
        let itemCount = 1;
        
        function addItem() {
            const itemsDiv = document.getElementById('items');
            const newItem = document.createElement('div');
            newItem.className = 'item';
            newItem.setAttribute('id', `item_${itemCount}`);
        
            newItem.innerHTML = `
                <label>Description:</label>
                <textarea name="item_description_${itemCount}" required></textarea>
                <label>Quantity:</label>
                <input type="number" name="item_quantity_${itemCount}" required>
                <label>Rate:</label>
                <input type="number" name="item_rate_${itemCount}" required>
                <button type="button" onclick="deleteItem(${itemCount})">Delete</button>
            `;
        
            itemsDiv.appendChild(newItem);
            document.getElementById('item_count').value = ++itemCount;
        }
        
        function deleteItem(index) {
            const itemToDelete = document.getElementById(`item_${index}`);
            if (itemToDelete) {
                itemToDelete.remove();
                updateItemSequence();
            }
        }
        
        function logout() {
            // Redirect to the logout route
            window.location.href = '/logout';
        }
        
        function updateItemSequence() {
            const items = document.querySelectorAll('#items .item');
            itemCount = items.length; // Update the item count after deletion
        
            // Update the item count value for the form
            document.getElementById('item_count').value = itemCount;
        
            // Renumber items and update their names and IDs
            items.forEach((item, index) => {
                const itemId = `item_${index}`;
                item.setAttribute('id', itemId);
        
                const description = item.querySelector(`input[name^="item_description"]`);
                const quantity = item.querySelector(`input[name^="item_quantity"]`);
                const rate = item.querySelector(`input[name^="item_rate"]`);
                const deleteButton = item.querySelector('button');
        
                if (description) description.name = `item_description_${index}`;
                if (quantity) quantity.name = `item_quantity_${index}`;
                if (rate) rate.name = `item_rate_${index}`;
                if (deleteButton) deleteButton.setAttribute('onclick', `deleteItem(${index})`);
            });
        }
    </script>
</body>

</html>